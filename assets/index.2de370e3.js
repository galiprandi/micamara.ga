var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,s)=>{for(var l in s||(s={}))t.call(s,l)&&r(e,l,s[l]);if(a)for(var l of a(s))n.call(s,l)&&r(e,l,s[l]);return e};import{r as l,u as o,T as c,V as i,B as m,A as u,M as d,a as p,b as g,c as f,d as v,e as E,f as y,C as S}from"./vendor.01e51be0.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const l=new URL(e,n);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const o=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){s(new Error(`Failed to import: ${e}`)),r(c)},onload(){a(self[t].moduleMap[l]),r(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("assets/");const h={title:"Gadget",description:"Equipamiento fotográfico profesional.",menuInitialSate:!1,searchEmptyQuery:"Productos Destacados",searchEmptyLimitResults:20,searchLimitResult:50,productsImagesURL:"//statics.micamara.ga/products-images/",noImageSRC:"https://micamara.ga/site/images/no-image.png"},b={query:h.searchEmptyQuery,setQuery(e){},stockOnly:!1,setStockOnly(e){}},C=l.createContext(b);C.displayName="Products Search Query";const N=()=>l.useContext(C),k=({children:e})=>{const t=localStorage.getItem("query")||h.searchEmptyQuery,[a,n]=l.useState(t),[r,s]=l.useState(!1);return l.useEffect((()=>{localStorage.setItem("query",a)}),[a]),l.createElement(C.Provider,{value:{query:a,setQuery:n,stockOnly:r,setStockOnly:s}},e)},O={menuState:h.menuInitialSate,menuClose(){},menuOpen(){},menuToggle(){}},w=l.createContext(O),L=()=>l.useContext(w),R=({children:e})=>{const[t,a]=l.useState(h.menuInitialSate),n=t;return l.createElement(w.Provider,{value:{menuState:n,menuClose:()=>a(!1),menuOpen:()=>a(!0),menuToggle:()=>a((e=>!e))}},e)},x=(e,t)=>localStorage.setItem(t,JSON.stringify(e)),I=e=>JSON.parse(localStorage.getItem(e)||"[]"),F={status:"",products:[],groups:[],types:[],brands:[]},P=l.createContext(F);P.displayName="Products Information";const _=()=>l.useContext(P);function M({children:e}){const{status:t,products:a,groups:n,types:r,brands:o}=(()=>{const[e,t]=l.useState("idle"),[a,n]=l.useState([]),[r,s]=l.useState([]),[o,c]=l.useState([]),[i,m]=l.useState([]);l.useEffect((()=>{t("getting");const e=I("Products");e.length&&(m(I("Products")),s(I("Types")),c(I("Groups")),m(I("Brands")),n(e),t("offline")),u().finally((()=>t("successful")))}),[]);const u=async()=>{const e=location.port?"src/Hooks/mock-api-data.txt":"https://docs.google.com/spreadsheets/d/1FjerBKgvNepZfQkPaUbd9DMy5-SMr-XxEKeNsZhcPM4/gviz/tq?tqx=out:json",t=await fetch(e),a=await t.text(),n=JSON.parse(a.slice(47,-2)),r=d(n);g(r)},d=e=>e.table.rows.filter((e=>!!e.c[20]&&!!e.c[21]&&!!e.c[4])).map(((e,t)=>p(e,t))),p=(e,t)=>{var a,n,r,s,l,o,c,i,m,u,d,p,g,f;const v=e.c;return{id:"id"+t,pid:encodeURI(String(null==(a=v[0])?void 0:a.v).replace(/\s/g,"_")),name:String(null==(n=v[0])?void 0:n.v),price:String(null==(r=v[1])?void 0:r.f),financing:String(null==(s=v[2])?void 0:s.v).split(",")||[],stock:!!(null==(l=v[4])?void 0:l.v)&&v[4].v>0,recommended:!!v[5],img:String(null==(o=v[17])?void 0:o.v)||!1,group:String(null==(c=v[6])?void 0:c.v),type:String(null==(i=v[7])?void 0:i.v),brand:String(null==(m=v[8])?void 0:m.v),description:String(null==(u=v[19])?void 0:u.v),search:`${String(null==(d=v[0])?void 0:d.v)} ${String(null==(p=v[8])?void 0:p.v)} ${String(null==(g=v[6])?void 0:g.v)} ${String(null==(f=v[7])?void 0:f.v)}`.toLocaleLowerCase()}},g=e=>{const t=e.map((e=>e.type)),a=e.map((e=>e.group)),r=e.map((e=>e.brand));n(e),x(e,"Products");const l=[...new Set(t)].sort();s(l),x(l,"Types");const o=[...new Set(a)].sort();c(o),x(o,"Groups");const i=[...new Set(r)].sort();m(i),x(i,"Brands")};return{status:e,products:a,groups:o,types:r,brands:i}})(),[c,i]=l.useState(F);return l.useEffect((()=>{if(i(s(s({},c),{status:t})),"successful"===t||"offline"===t)i({status:t,products:a,groups:n,types:r,brands:o});else if("error"===t)throw Error("Can not connect to products API. 😩")}),[t]),l.createElement(P.Provider,{value:c},e)}function U(){const{query:e,setQuery:t}=N(),{types:a,groups:n,brands:r}=_(),s=[...new Set(r.concat(a,n))].sort(),[o,c]=l.useState(!1),i=l.useRef(null),m=async()=>{var e,t;c((e=>!e)),await u(800),(null==(e=i.current)?void 0:e.classList.contains("active"))&&(null==(t=i.current)||t.focus())},u=e=>new Promise((t=>setTimeout(t,e)));return l.createElement("div",{className:"btn search"},l.createElement("form",{onSubmit:e=>{var a,n;e.preventDefault(),(null==(a=i.current)?void 0:a.value)&&t(i.current.value),null==(n=i.current)||n.blur(),m()},className:"searchForm"},l.createElement("input",{ref:i,type:"text",value:e,onChange:e=>t(e.target.value),onFocus:()=>i.current&&i.current.select(),className:o?"active":"",placeholder:"Buscar",list:"searchAssistant"}),l.createElement("datalist",{id:"searchAssistant"},s.map((e=>l.createElement("option",{value:e,key:e})))),l.createElement("span",{className:"material-icons btn",onClick:m},"search")))}const $=()=>{const{status:e}=_();return l.createElement("nav",{className:`header ${"successful"!==e&&"loading"}`},l.createElement("div",null,l.createElement("img",{src:"gadget.svg",alt:"Gadget",title:"Gadget",className:"header__logo"})),l.createElement("div",null,l.createElement(U,null)))};const T=e=>{try{const t=[...e];let a,n=t.length;for(;n;)a=Math.random()*n-->>>0,[t[n],t[a]]=[t[a],t[n]];return t}catch(t){return console.error(t),[]}},j=()=>[o({position:"top-right",status:"success",isClosable:!0})],q=()=>{const[e]=j();return(t,a="¡Copiado al portapapeles!")=>{try{return navigator.clipboard.writeText(t),e({description:a}),!0}catch(n){return e({title:"Error",description:"Opción no disponible en el dispositivo.",status:"error",duration:null}),console.error(n),!1}}};const Q=({active:e=!1,pid:t})=>{const[a,n]=l.useState(e),r="Favorites";let s=[];l.useEffect((()=>{s=JSON.parse(localStorage.getItem(r)||"[]"),n(s.includes(t))}),[]);return l.createElement("span",{className:"tag btn material-icons favorite "+(a?"active":""),onClick:()=>(e=>{let a=[];n(e),s=JSON.parse(localStorage.getItem(r)||"[]"),a=e?[...new Set([...s,t])]:s.filter((e=>e!==t)),localStorage.setItem(r,JSON.stringify(a))})(!a),title:a?"Quitar de favoritos":"Agregar a Mis Favoritos"},a?"favorite":"favorite_border")};const B=({src:e,title:t,pid:a,recommended:n})=>{const{setQuery:r}=N();return l.createElement("div",{className:"card-image"},l.createElement("img",{src:e,alt:t,title:t}),l.createElement(Q,{pid:a}),n&&l.createElement("span",{className:"tag btn material-icons recommended",title:"¡Producto recomendado!",onClick:()=>r("Recomendados")},"verified"))},J=({name:e,price:t,description:a})=>{const[n,r]=l.useState(!1),s=q();return l.createElement(l.Fragment,null,l.createElement("span",{title:n?"Ocultar descripción del producto.":"Mostrar descripción del producto.",className:"material-icons btn btn-more-info",onClick:()=>r((e=>!e))},n?"expand_more":"expand_less"),l.createElement("section",{className:n?"description active":"description"},l.createElement("b",null,l.createElement(c,{paddingBottom:15,fontSize:"lg",style:{cursor:"pointer"},onClick:()=>s(`${e} ${t}\n\n${a}`)},e)),l.createElement("div",{dangerouslySetInnerHTML:{__html:a}})))};function z(e){var r=((e,r)=>{var s={};for(var l in e)t.call(e,l)&&r.indexOf(l)<0&&(s[l]=e[l]);if(null!=e&&a)for(var l of a(e))r.indexOf(l)<0&&n.call(e,l)&&(s[l]=e[l]);return s})(e,[]);const{status:o}=_(),c=q(),{name:u,price:d,financing:p,img:g,stock:f,type:v}=r,E=`${u} ${d}`,y=g?`${h.productsImagesURL}${g}`:h.noImageSRC,S=E+"\n 💳 "+p.join("\n 💳 ");return l.createElement("div",{className:"card"},l.createElement(B,s({src:y,title:E},r)),l.createElement(i,null,l.createElement("p",{title:"Click para copiar al portapapeles.",className:"card-title",onClick:()=>c(E)},"offline"===o?u:E),"successful"===o?l.createElement("p",{className:"financing"},l.createElement("span",{title:"Click para copiar al portapapeles.",className:"material-icons",onClick:()=>c(S)},"credit_card"),l.createElement("select",null,p.map((e=>l.createElement("option",{key:e},e))))):l.createElement("div",null),f?l.createElement(m,{variant:"solid",bg:"#1a535c"},"entrega inmediata"):l.createElement(m,{title:"El producto se entrega en 4 o 5 días hábiles. ",variant:"outline"},"entrega pactada"),"Usados Seleccionados"===v&&l.createElement(m,{variant:"solid",colorScheme:"orange"},"Usado Seleccionados")),l.createElement(J,s({},r)))}const A=({startOpened:e=!0,title:t="title",body:a="Body",btnCancel:n="Cancelar",btnConfirmText:r="Confirmar",confirmCallback:s=(()=>{}),children:o})=>{const[c,i]=l.useState(e),m=l.useRef(null),y=()=>{s(),i(!1)};return l.createElement(l.Fragment,null,l.cloneElement(o,{onClick:()=>i(!0)}),l.createElement(u,{isOpen:c,leastDestructiveRef:m,onClose:y},l.createElement(d,null,l.createElement(p,null,l.createElement(g,{fontSize:"lg",fontWeight:"bold"},t),l.createElement(f,null,a),l.createElement(v,null,l.createElement(E,{"ref:any":m,onClick:()=>i(!1)},n),l.createElement(E,{colorScheme:"red",onClick:y,ml:3},r))))))},G=()=>{const{setQuery:e}=N();return l.createElement(A,{startOpened:!1,title:"Limpiar Favoritos",body:"¿Seguro que desea borrar todos los favoritos?",btnConfirmText:"Limpiar",confirmCallback:()=>{localStorage.removeItem("Favorites"),e("")}},l.createElement("button",{style:D},"Limpiar favoritos"))},D={flexBasis:"100%",color:"tomato",backgroundColor:"white",lineHeight:3},H=()=>{const{query:e,stockOnly:t}=N(),a=(()=>{const{searchEmptyLimitResults:e,searchEmptyQuery:t}=h,{products:a}=_(),{query:n}=N(),r=n||t;if(r===t)return[...T(a)].slice(0,e);if("Favoritos"===r){const e=JSON.parse(localStorage.getItem("Favorites")||"[]");return a.filter((t=>e.includes(t.pid)))}if("Recomendados"===r)return a.filter((e=>e.recommended));const s=new RegExp(r,"i");return a.filter((e=>e.search.match(s))).slice(0,h.searchLimitResult)})(),{status:n}=_(),{menuOpen:r}=L();let o=-1;const c=e=>{const t=e.changedTouches[0].clientX;"touchstart"===e.type&&(o=t),"touchend"===e.type&&o-t>100&&r()};return l.createElement(l.Fragment,null,l.createElement("div",{className:"products-list",onTouchStart:e=>c(e),onTouchEnd:e=>c(e)},("successful"===n||"offline"===n)&&!!a.length&&a.filter((e=>!t||e.stock===t)).map((e=>l.createElement(z,s(s({},e),{key:e.id})))),("successful"===n||"offline"===n)&&!a.length&&V("🤪","Ningún producto coincide con esa búsqueda."),"Favoritos"===e&&!!a.length&&l.createElement(G,null),"getting"===n&&V("⏳","La paciencia es la virtud de los sabios."),"error"===n&&V("😱","Algo salió mal.")))},V=(e,t)=>l.createElement("div",{className:"no-products-message"},e&&l.createElement("p",null,e),t&&l.createElement("p",null,t));const K=()=>{const{menuState:e,menuToggle:t}=L(),a=q(),{stockOnly:n,setStockOnly:r}=N(),[s]=j();return l.createElement("footer",{className:"app-footer"},l.createElement("span",{className:"material-icons btn",title:"Copiar al portapapeles para compartir",onClick:()=>{try{const e=location.href;a(e),navigator.share&&navigator.share({title:h.title,text:h.description,url:e})}catch(e){console.error(e)}}},"share"),l.createElement("a",{href:"tel:+5493815900868",title:"(381) 5900868"},l.createElement("span",{className:"material-icons btn",title:"Llamar telefónicamente."},"call")),l.createElement("a",{href:"https://m.me/100010196598541",target:"_blank",rel:"noopener noreferrer"},l.createElement("span",{className:"material-icons btn",title:"Enviar mensaje por messenger"},"chat")),l.createElement("span",{className:"material-icons btn",title:n?"Ver productos con entrega inmediata":"Ver todos los productos, incluso con entrega pactada.",onClick:()=>{r(!n);s({description:n?"Mostrar también productos con entrega pactada":"¡ Solo productos con entrega inmediata !",status:n?"info":"success",position:"bottom-right"})}},n?"sentiment_very_satisfied":"error"),l.createElement("span",{className:"material-icons btn",title:"No implemented !",onClick:()=>t()},e?"close":"menu"))};const X=()=>{const{menuState:e,menuClose:t}=L(),{types:a}=_(),{query:n,setQuery:r}=N(),s=e=>r(e);return l.createElement("div",{className:"aside-menu "+(e?"active":""),onClick:()=>t()},l.createElement("div",{className:"container"},l.createElement("div",{className:"title"},l.createElement("span",{className:"name"},"Categorías"),l.createElement("span",{className:"btn close material-icons",onClick:t},"close")),l.createElement("ul",{className:"menu-items"},l.createElement("li",{className:"Favoritos"===n?"active":"",onClick:()=>s("Favoritos")},"Mis Favoritos",l.createElement("span",{style:{color:"tomato",fontSize:"inherit",marginLeft:10},className:"material-icons"},"favorite")),l.createElement("li",{className:"Recomendados"===n?"active":"",onClick:()=>s("Recomendados")},"Recomendados",l.createElement("span",{style:{fontSize:"inherit",marginLeft:10},className:"material-icons"},"verified")),l.createElement("li",{className:"Usados Seleccionados"===n?"active":"",onClick:()=>s("Usados Seleccionados")},"Usados Seleccionados",l.createElement("span",{style:{fontSize:"inherit",marginLeft:10},className:"material-icons"},"gpp_good")),a.filter((e=>"Usados Seleccionados"!==e)).map((e=>l.createElement("li",{key:e,className:n===e?"active":"",onClick:()=>s(e)},e))))))};const Z=()=>l.createElement(l.Fragment,null,l.createElement("main",{className:"home"},l.createElement($,null),l.createElement(H,null),l.createElement(K,null)),l.createElement(X,null));y.render(l.createElement(l.StrictMode,null,l.createElement(k,null,l.createElement(M,null,l.createElement(R,null,l.createElement(S,null,l.createElement(Z,null)))))),document.getElementById("root"));
